<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get going with nzcensr • nzcensr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Get going with nzcensr">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nzcensr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getgoing-nzcensr.html">Get going with nzcensr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/phildonovan/donovanr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://spatialanalytics.co.nz">
    <span class="fa fa-angle-double-up"></span>
     
    spatialanalytics.co.nz
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Get going with nzcensr</h1>
                        <h4 class="author">Phil Donovan</h4>
            
            <h4 class="date">2018-04-21</h4>
      
      
      <div class="hidden name"><code>get-going-nzcensr.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <code>nzcensr</code> package is mainly a data package to make it easy to import the New Zealand Census data as either normal or spatial dataframes without having to download the data for each project and perform different joins. The package contains the following data sets:</p>
<table class="table">
<thead><tr class="header">
<th align="left">dataset</th>
<th align="left">description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dwelling_area_units</td>
<td align="left">Dwelling data set at the area unit level</td>
</tr>
<tr class="even">
<td align="left">dwelling_local_boards</td>
<td align="left">Dwelling data set at the local board level</td>
</tr>
<tr class="odd">
<td align="left">dwelling_meshblocks</td>
<td align="left">Dwelling data set at the meshblock level</td>
</tr>
<tr class="even">
<td align="left">dwelling_regions</td>
<td align="left">Dwelling data set at the regional level</td>
</tr>
<tr class="odd">
<td align="left">dwelling_tas</td>
<td align="left">Dwelling data set at the territorial authority level</td>
</tr>
<tr class="even">
<td align="left">family_area_units</td>
<td align="left">Family data set at the area unit level</td>
</tr>
<tr class="odd">
<td align="left">family_local_boards</td>
<td align="left">Family data set at the local board level</td>
</tr>
<tr class="even">
<td align="left">family_meshblocks</td>
<td align="left">Family data set at the meshblock level</td>
</tr>
<tr class="odd">
<td align="left">family_regions</td>
<td align="left">Family data set at the regional level</td>
</tr>
<tr class="even">
<td align="left">family_tas</td>
<td align="left">Family data set at the territorial authority level</td>
</tr>
<tr class="odd">
<td align="left">household_area_units</td>
<td align="left">Household data set at the area unit level</td>
</tr>
<tr class="even">
<td align="left">household_local_boards</td>
<td align="left">Household data set at the local board level</td>
</tr>
<tr class="odd">
<td align="left">household_meshblocks</td>
<td align="left">Household data set at the meshblock level</td>
</tr>
<tr class="even">
<td align="left">household_regions</td>
<td align="left">Household data set at the regional level</td>
</tr>
<tr class="odd">
<td align="left">household_tas</td>
<td align="left">Household data set at the territorial authority level</td>
</tr>
<tr class="even">
<td align="left">individual_part_1_area_units</td>
<td align="left">Individual (Part 1) data set at the area unit level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_1_local_boards</td>
<td align="left">Individual (Part 1) data set at the local board level</td>
</tr>
<tr class="even">
<td align="left">individual_part_1_meshblocks</td>
<td align="left">Individual (Part 1) data set at the meshblock level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_1_regions</td>
<td align="left">Individual (Part 1) data set at the regional level</td>
</tr>
<tr class="even">
<td align="left">individual_part_1_tas</td>
<td align="left">Individual (Part 1) data set at the territorial authority level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_2_area_units</td>
<td align="left">Individual (Part 2) data set at the area unit level</td>
</tr>
<tr class="even">
<td align="left">individual_part_2_local_boards</td>
<td align="left">Individual (Part 2) data set at the local board level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_2_meshblocks</td>
<td align="left">Individual (Part 2) data set at the meshblock level</td>
</tr>
<tr class="even">
<td align="left">individual_part_2_regions</td>
<td align="left">Individual (Part 2) data set at the regional level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_2_tas</td>
<td align="left">Individual (Part 2) data set at the territorial authority level</td>
</tr>
<tr class="even">
<td align="left">individual_part_3a_area_units</td>
<td align="left">Individual (Part 3A) data set at the area unit level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_3a_local_boards</td>
<td align="left">Individual (Part 3A) data set at the local board level</td>
</tr>
<tr class="even">
<td align="left">individual_part_3a_meshblocks</td>
<td align="left">Individual (Part 3A) data set at the meshblock level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_3a_regions</td>
<td align="left">Individual (Part 3A) data set at the regional level</td>
</tr>
<tr class="even">
<td align="left">individual_part_3a_tas</td>
<td align="left">Individual (Part 3A) data set at the territorial authority level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_3b_area_units</td>
<td align="left">Individual (Part 3B) data set at the area unit level</td>
</tr>
<tr class="even">
<td align="left">individual_part_3b_local_boards</td>
<td align="left">Individual (Part 3B) data set at the local board level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_3b_meshblocks</td>
<td align="left">Individual (Part 3B) data set at the meshblock level</td>
</tr>
<tr class="even">
<td align="left">individual_part_3b_regions</td>
<td align="left">Individual (Part 3B) data set at the regional level</td>
</tr>
<tr class="odd">
<td align="left">individual_part_3b_tas</td>
<td align="left">Individual (Part 3B) data set at the territorial authority level</td>
</tr>
</tbody>
</table>
<p>At present, it only has two functions:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/nz_census_data.html">nz_census_data()</a></code> and</li>
<li>
<code><a href="../reference/read_nz_census_data.html">read_nz_census_data()</a></code>.</li>
</ol>
</div>
<div id="fuel-types-in-nz" class="section level2">
<h2 class="hasAnchor">
<a href="#fuel-types-in-nz" class="anchor"></a>Fuel types in NZ</h2>
<p>Let’s explore the dwelling data set at the regional level.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nzcensr)

<span class="co"># Read in data</span>
dwelling_regions_long &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_nz_census_data.html">read_nz_census_data</a></span>(dwelling_regions, 
                                          <span class="dt">long =</span> <span class="ot">TRUE</span>, 
                                          <span class="dt">replace_confidential_values =</span> <span class="ot">NA_integer_</span>, 
                                          <span class="dt">include_gis =</span> <span class="ot">FALSE</span>)
knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw">head</span>(dwelling_regions_long))</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Area_Code_and_Description</th>
<th align="left">Code</th>
<th align="left">Description</th>
<th align="left">variable</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01 Northland Region</td>
<td align="left">01</td>
<td align="left">Northland Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">471</td>
</tr>
<tr class="even">
<td align="left">02 Auckland Region</td>
<td align="left">02</td>
<td align="left">Auckland Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">1548</td>
</tr>
<tr class="odd">
<td align="left">03 Waikato Region</td>
<td align="left">03</td>
<td align="left">Waikato Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">843</td>
</tr>
<tr class="even">
<td align="left">04 Bay of Plenty Region</td>
<td align="left">04</td>
<td align="left">Bay of Plenty Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">528</td>
</tr>
<tr class="odd">
<td align="left">05 Gisborne Region</td>
<td align="left">05</td>
<td align="left">Gisborne Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">114</td>
</tr>
<tr class="even">
<td align="left">06 Hawke’s Bay Region</td>
<td align="left">06</td>
<td align="left">Hawke’s Bay Region</td>
<td align="left">2001_Census_dwelling_record_type_for_occupied_dwellings_Occupied_Non-private_Dwelling</td>
<td align="right">342</td>
</tr>
</tbody>
</table>
<p>Nice and easy! This call brings in the following dataset having set confidential values to NA, wihtout including the GIS geometry and in the ‘long’ firmat. This make for easy plotting in <code>ggplot2</code>. Let’s clean and extract th columns we have so that we can have a look at some of the fuel types used in four regions in New Zealand: Auckland, Wellington, Canterbury and Otago.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)

<span class="co"># Clean data and variable names</span>
fuel_types_regions &lt;-<span class="st"> </span>dwelling_regions_long <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(variable, <span class="st">"Census_fuel_types_used_to_heat_dwellings_.*_for_occupied_private_d"</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">variable =</span> <span class="kw">str_replace</span>(variable, <span class="st">"_Census_fuel_types_used_to_heat_dwellings_</span><span class="ch">\\</span><span class="st">(total_responses</span><span class="ch">\\</span><span class="st">)</span><span class="ch">\\</span><span class="st">(4</span><span class="ch">\\</span><span class="st">)_for_occupied_private_dwellings_"</span>, <span class="st">"splithere"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">           </span><span class="kw">str_replace_all</span>(<span class="st">"_"</span>, <span class="st">" "</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(variable, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">"year"</span>, <span class="st">"fuel_type"</span>), <span class="dt">sep =</span> <span class="st">"splithere"</span>, <span class="dt">remove =</span> <span class="ot">TRUE</span> )

<span class="co"># Select desired regions and fuel types</span>
fuel_types_regions_selected &lt;-<span class="st"> </span>fuel_types_regions <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(fuel_type <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Bottled Gas"</span>, <span class="st">"Coal"</span>, <span class="st">"Electricity"</span>, <span class="st">"Solar Power"</span>, <span class="st">"Wood"</span>),
         Description <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Auckland Region"</span>, <span class="st">"Canterbury Region"</span>, <span class="st">"Wellington Region"</span>, <span class="st">"Otago Region"</span>))

knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw">head</span>(fuel_types_regions))</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Area_Code_and_Description</th>
<th align="left">Code</th>
<th align="left">Description</th>
<th align="left">year</th>
<th align="left">fuel_type</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01 Northland Region</td>
<td align="left">01</td>
<td align="left">Northland Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">14658</td>
</tr>
<tr class="even">
<td align="left">02 Auckland Region</td>
<td align="left">02</td>
<td align="left">Auckland Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">92976</td>
</tr>
<tr class="odd">
<td align="left">03 Waikato Region</td>
<td align="left">03</td>
<td align="left">Waikato Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">40086</td>
</tr>
<tr class="even">
<td align="left">04 Bay of Plenty Region</td>
<td align="left">04</td>
<td align="left">Bay of Plenty Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">30132</td>
</tr>
<tr class="odd">
<td align="left">05 Gisborne Region</td>
<td align="left">05</td>
<td align="left">Gisborne Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">5067</td>
</tr>
<tr class="even">
<td align="left">06 Hawke’s Bay Region</td>
<td align="left">06</td>
<td align="left">Hawke’s Bay Region</td>
<td align="left">2001</td>
<td align="left">Bottled Gas</td>
<td align="right">22263</td>
</tr>
</tbody>
</table>
<p>Right, let’s plot it over time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(fuel_types_regions_selected, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> value, <span class="dt">color =</span> Description, <span class="dt">group =</span> Description)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>fuel_type, <span class="dt">scales =</span> <span class="st">"free"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Fuel types in selected regions in New Zealand from 2001 to 2006 to 2013"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">"Year"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">"Number of dwellings"</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="get-going-nzcensr_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#fuel-types-in-nz">Fuel types in NZ</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Phil Donovan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
